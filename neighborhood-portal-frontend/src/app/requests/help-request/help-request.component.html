<div class="request-container">
  <mat-card class="request-card">
    <mat-card-header>
      <mat-card-title>
        <h1>Create Help Request</h1>
      </mat-card-title>
    </mat-card-header>

    <mat-card-content>
      <form [formGroup]="requestForm" (ngSubmit)="onSubmit()">
        <mat-form-field appearance="outline" class="full-width">
          <mat-label>Request Title</mat-label>
          <input matInput formControlName="title" placeholder="e.g., Need help fixing leaky faucet" />
          @if (requestForm.get('title')?.hasError('required') && requestForm.get('title')?.touched) {
            <mat-error>Title is required</mat-error>
          }
          @if (requestForm.get('title')?.hasError('minlength') && requestForm.get('title')?.touched) {
            <mat-error>Title must be at least 5 characters</mat-error>
          }
        </mat-form-field>

        <mat-form-field appearance="outline" class="full-width">
          <mat-label>Category</mat-label>
          <mat-select formControlName="category">
            @for (category of categories; track category) {
              <mat-option [value]="category">{{ category }}</mat-option>
            }
          </mat-select>
          @if (requestForm.get('category')?.hasError('required') && requestForm.get('category')?.touched) {
            <mat-error>Please select a category</mat-error>
          }
        </mat-form-field>

        <mat-form-field appearance="outline" class="full-width">
          <mat-label>Description</mat-label>
          <textarea 
            matInput 
            formControlName="description" 
            rows="5"
            placeholder="Describe your request in detail..."></textarea>
          @if (requestForm.get('description')?.hasError('required') && requestForm.get('description')?.touched) {
            <mat-error>Description is required</mat-error>
          }
          @if (requestForm.get('description')?.hasError('minlength') && requestForm.get('description')?.touched) {
            <mat-error>Description must be at least 10 characters</mat-error>
          }
        </mat-form-field>

        <mat-form-field appearance="outline" class="full-width">
          <mat-label>Attachments (Optional)</mat-label>
          <input matInput formControlName="attachments" placeholder="URL to image or document" />
        </mat-form-field>

        <div class="button-group">
          <button mat-raised-button color="primary" type="submit" [disabled]="isSubmitting">
            {{ isSubmitting ? 'Creating...' : 'Create Request' }}
          </button>
          <button mat-button type="button" routerLink="/dashboard">Cancel</button>
        </div>
      </form>
    </mat-card-content>
  </mat-card>
</div>
